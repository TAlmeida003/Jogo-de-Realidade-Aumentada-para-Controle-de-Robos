#include <stdio.h>
#include "system.h"
#include <stdlib.h>
#include <alt_types.h>
#include "lib_KEY/KEY.h"

int main() {
	open_KEY();
    int valor;

    printf("init \n");

    int x = 0;
    int y = 0;
    int vel_x = 1;
    int vel_y = 1;
    while (1) {

        printf("============================================================ \n");
        for (int i = 0; i < 90; i++){
            printf("|");
            for (int j = 0; j < 60; j++){
                if (j == x && i == y){
                    printf("@");
                }else{
                    printf(" ");
                }
            }
            printf("| \n");
        }
        printf("============================================================ \n");


        system("clear");

        if (read_KEY(&valor)) {
            if (valor == 1) {
                vel_x = 1;
                vel_y = 0;
            } else if (valor == 2) {
                vel_x = 0;
                vel_y = 1;
            } else if (valor == 4) {
                vel_x = -1;
                vel_y = 0;
            } else if (valor == 8) {
                vel_x = 0;
                vel_y = -1;
            }
        }

        x += vel_x;
        y += vel_y;
    }

    close_KEY();

    return 0;
}
