#include <stdio.h>
#include "system.h"
#include <alt_types.h>

#define MEMORIA_BASE 0x03000 // Defina o endereço base da memória
#define REG_DATA_OFFSET 0
#define A 1

int main() {
    volatile int *p_led = (int *) MEMORIA_BASE;
    volatile int valor;
    int num = 0;

    printf("init \n");

    while (1) {
        valor = *(p_led + REG_DATA_OFFSET);
        if (valor != 0) {
            if ((valor & 1) == 1)
                num = 0;
            else if ((valor & 2) == 2)
                num = 1;
            else if ((valor & 4) == 4)
                num = 2;
            else if ((valor & 8) == 8)
                num = 3;
            else if ((valor & 16) == 16)
                num = 4;
            else if ((valor & 32) == 32)
                num = 5;
            else if ((valor & 64) == 64)
                num = 6;
            else if ((valor & 128) == 128)
                num = 7;

            printf("Botão foi pressionado %d\n", num);
            *(p_led + REG_DATA_OFFSET) = 1; // Resetando o valor
        }
    }

    return 0;
}
