#include <stdio.h>
#include "system.h"
#include <unistd.h>
#include <alt_types.h>

#define MEMORIA_BASE 0x03000 // Defina o endereço base da memória
#define REG_DATA_OFFSET 0

int main() {
    unsigned int *p_led = (unsigned int *) MEMORIA_BASE;
    printf("init \n");

    *(p_led + 1) = 0;
    usleep(10000000);
    unsigned int valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // 0

    *(p_led + 1) = 1;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // 255

    *(p_led + 1) = 15;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido


    *(p_led + 1) = 31;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

    *(p_led + 1) = 63;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

    *(p_led + 1) = 127;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

    *(p_led + 1) = 255;
    usleep(10000000);
    valor = *(p_led + REG_DATA_OFFSET);
    printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

    *(p_led + 1) = 511;
    usleep(10000000);
     valor = *(p_led + REG_DATA_OFFSET);
     printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

     *(p_led + 1) = 1023;
     usleep(10000000);
     valor = *(p_led + REG_DATA_OFFSET);
     printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido

      *(p_led + 1) = 2047;
      usleep(10000000);
      valor = *(p_led + REG_DATA_OFFSET);
      printf("Valor lido da reg0: %d\n", valor); // Imprime o valor lido
      printf("end");
    while(1);
    return 0;
}
